<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dali Nadjib AI Voiture â€” ØªØ´Ø®ÙŠØµ Ø´Ø§Ù…Ù„ OBD Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</title>
<style>
  :root{
    --bg:#05060a;
    --card:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    --muted:#9aa4b2;
    --accent1:#ff6b6b;
    --accent2:#7c5cff;
    --accent3:#00d4ff;
    --glass: rgba(255,255,255,0.03);
    --success:#4ade80;
    --danger:#ff7b7b;
    --radius:14px;
  }
  *{box-sizing:border-box;font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", Arial; }
  body{
    margin:0;
    background: radial-gradient(1000px 500px at 10% 10%, rgba(124,92,255,0.09), transparent 8%),
                radial-gradient(700px 300px at 90% 90%, rgba(0,212,255,0.04), transparent 8%),
                var(--bg);
    color:#e6eef8;
    padding:20px;
    min-height:100vh;
  }
  .container{ max-width:1200px; margin:0 auto; display:grid; grid-template-columns: 380px 1fr; gap:18px; align-items:start; }
  .card{ background:var(--card); border:1px solid rgba(255,255,255,0.04); padding:18px; border-radius:var(--radius); box-shadow: 0 8px 30px rgba(2,6,23,0.6); }
  h1{ margin:0; font-size:20px; display:flex; gap:10px; align-items:center; }
  .appTitle{ background:linear-gradient(90deg,var(--accent2),var(--accent3)); color:#020617; padding:8px 12px; border-radius:10px; font-weight:800; font-size:13px;}
  p.lead{ margin:8px 0 18px 0; color:var(--muted); font-size:13px; }

  label{ display:block; font-size:13px; color:var(--muted); margin-top:12px; margin-bottom:6px; }
  input[type="text"], select, textarea {
    width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); background:var(--glass); color:inherit; outline:none; font-size:14px;
  }
  textarea{ min-height:84px; }
  .row{ display:flex; gap:10px; }
  .btn{ display:inline-flex; align-items:center; gap:10px; padding:10px 14px; border-radius:12px; cursor:pointer; border:none; font-weight:700; font-size:14px; }
  .btn-primary{ background: linear-gradient(90deg,var(--accent2),var(--accent1)); color:#07070b; box-shadow: 0 8px 28px rgba(124,92,255,0.12); }
  .btn-ghost{ background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--muted); }

  .profile{
    display:flex; gap:12px; align-items:center; margin-bottom:6px;
  }
  .avatar{
    width:72px; height:72px; border-radius:14px; overflow:hidden; flex-shrink:0; border:1px solid rgba(255,255,255,0.06);
    display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  }
  .avatar img{ width:100%; height:100%; object-fit:cover; display:block; }

  .small{ font-size:12px; color:var(--muted); margin-top:8px; }

  /* OUTPUT area */
  .outputs{ display:flex; flex-direction:column; gap:14px; }
  .resHeader{ display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap; }
  .badge{ padding:8px 12px; border-radius:999px; background:linear-gradient(90deg,var(--accent3),var(--accent2)); color:#071122; font-weight:800; }
  .meta{ color:var(--muted); font-size:13px; }

  .resultCard{ padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); }
  .fault{ border-radius:10px; padding:12px; margin-bottom:10px; background: linear-gradient(90deg, rgba(124,92,255,0.04), rgba(0,212,255,0.02)); border:1px solid rgba(124,92,255,0.06); }
  pre.analysis{ white-space:pre-wrap; color:#dfeeff; background:rgba(0,0,0,0.18); padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.02); }

  .controls{ display:flex; gap:8px; align-items:center; }
  .searchArea{ display:flex; gap:8px; align-items:center; }

  .empty{ text-align:center; color:var(--muted); padding:24px; border-radius:12px; border:1px dashed rgba(255,255,255,0.03); }

  footer.note{ text-align:center; color:var(--muted); margin-top:12px; font-size:13px; grid-column:1/-1; }

  /* responsive */
  @media (max-width:980px){
    .container{ grid-template-columns:1fr; padding:8px; }
  }
</style>
</head>
<body>
  <div class="container">
    <!-- LEFT FORM -->
    <aside class="card" aria-labelledby="title">
      <div class="profile">
        <div class="avatar" id="avatarBox" title="Ø§Ø¶ØºØ· Ù„ØªØ¹ÙŠÙŠÙ† ØµÙˆØ±ØªÙƒ">
          <!-- default icon -->
          <img id="avatarImg" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„" style="display:none" />
          <div id="avatarPlaceholder" style="text-align:center;color:var(--muted);font-weight:700;">D N</div>
        </div>
        <div style="flex:1">
          <h1 id="title"><span class="appTitle">Dali Nadjib AI</span> <span style="margin-right:8px;font-weight:700;">ØªØ´Ø®ÙŠØµ Ø£Ø¹Ø·Ø§Ù„ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</span></h1>
          <div class="small">ÙˆØ§Ø¬Ù‡ØªÙƒ Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø£ÙƒÙˆØ§Ø¯ â€” ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
        </div>
      </div>

      <label>ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
      <input id="avatarFile" type="file" accept="image/*" />

      <label for="brand">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø© / Ø§Ù„Ù…Ø§Ø±ÙƒØ©</label>
      <select id="brand">
        <option value="all">Ø¹Ø§Ù… â€” ØºÙŠØ± Ù…Ø­Ø¯Ø¯</option>
        <option value="Renault">Renault</option>
        <option value="Peugeot">Peugeot</option>
        <option value="Chery">Chery</option>
        <option value="Fiat">Fiat</option>
        <option value="Hyundai">Hyundai</option>
        <option value="Volkswagen">Volkswagen</option>
        <option value="BMW">BMW</option>
        <option value="Other">Ù…Ø§Ø±ÙƒØ§Øª Ø£Ø®Ø±Ù‰</option>
      </select>

      <label for="model">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</label>
      <select id="model">
        <!-- Ø³ÙŠÙÙ…Ù„Ø£ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ Ø¨Ø­Ø³Ø¨ Ø§Ù„Ù…Ø§Ø±ÙƒØ© -->
      </select>

      <label for="year">Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹</label>
      <input id="year" type="text" placeholder="Ù…Ø«Ø§Ù„: 2015" />

      <label for="codeInput">ÙƒÙˆØ¯ OBD (Ø§ÙƒØªØ¨ Ø£Ùˆ Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©)</label>
      <div style="display:flex;gap:8px;">
        <input id="codeInput" type="text" placeholder="Ù…Ø«Ø§Ù„: P0300" />
        <button class="btn btn-ghost" id="openList">ğŸ“‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</button>
      </div>

      <label for="desc">ÙˆØµÙ Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø© (Ø¨Ø¥ÙŠØ¬Ø§Ø²)</label>
      <textarea id="desc" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ù…Ø­Ø±Ùƒ ÙŠÙ‡ØªØ² Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ø¯ØŒ Ø¶ÙˆØ¡ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø«Ø§Ø¨Øª"></textarea>

      <div style="display:flex;gap:10px;margin-top:12px;">
        <button class="btn btn-primary" id="analyzeBtn">ğŸ” ØªØ´Ø®ÙŠØµ Ø§Ù„Ø¢Ù†</button>
        <button class="btn btn-ghost" id="resetBtn">â™»ï¸ Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„</button>
      </div>

      <div style="display:flex;gap:8px;margin-top:12px;">
        <label class="small" style="flex:1;">
          <input id="importJson" type="file" accept="application/json" style="display:none" />
          <button class="btn btn-ghost" id="importBtn">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© (JSON)</button>
        </label>
        <button class="btn btn-ghost" id="exportDbBtn">ğŸ“¤ ØªØµØ¯ÙŠØ± Ù‚Ø§Ø¹Ø¯Ø© (JSON)</button>
      </div>

      <div class="small">Ù…Ù„Ù Ù…ÙØ¯Ù…Ø¬ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø£ÙƒÙˆØ§Ø¯ Ù…ÙˆØ³Ø¹Ø©. Ø§Ø³ØªÙˆØ±Ø¯ Ù…Ù„Ù JSON ÙƒØ§Ù…Ù„ Ø¥Ø°Ø§ Ø±ØºØ¨Øª ÙÙŠ ØªØºØ·ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©. Ø§Ù„Ù…Ù„Ù ÙŠØ¹Ù…Ù„ Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¯ÙˆÙ† Ø³ÙŠØ±ÙØ±.</div>
    </aside>

    <!-- RIGHT OUTPUTS -->
    <main class="card outputs" aria-live="polite">
      <div class="resHeader">
        <div style="display:flex;gap:12px;align-items:center;">
          <div class="badge">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ´Ø®ÙŠØµ</div>
          <div class="meta" id="metaInfo">Ù„Ù… ÙŠØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ ØªØ´Ø®ÙŠØµ â€” Ø§Ø¶ØºØ· "ØªØ´Ø®ÙŠØµ Ø§Ù„Ø¢Ù†".</div>
        </div>
        <div class="controls">
          <button class="btn btn-ghost" id="copyBtn">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ù†Øµ</button>
          <button class="btn btn-ghost" id="downloadBtn">ğŸ“¥ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
        </div>
      </div>

      <div id="outputArea" class="resultCard">
        <div class="empty">
          <div style="font-weight:700;margin-bottom:6px">Ù„Ù… ÙŠØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ ØªØ´Ø®ÙŠØµ Ø¨Ø¹Ø¯</div>
          <div>Ø§Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø£Ùˆ ÙˆØµÙ Ø§Ù„Ø­Ø§Ù„Ø© Ø«Ù… Ø§Ø¶ØºØ· "ØªØ´Ø®ÙŠØµ Ø§Ù„Ø¢Ù†".</div>
        </div>
      </div>

      <div class="card" style="background:transparent;border:none;padding:0;">
        <h3 style="margin:0 0 8px 0;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©</h3>
        <ul style="color:var(--muted);">
          <li>Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ØªØ¹Ù…Ù„ Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù„Ù JSON ÙƒØ§Ù…Ù„ Ù„Ù„Ø£ÙƒÙˆØ§Ø¯ Ø¥Ù† Ø±ØºØ¨Øª.</li>
          <li>Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¹Ø§Ù…Ø© P0xxx Ø¹Ø§Ø¯Ø©Ù‹ Ù…Ø§ ØªÙƒÙˆÙ† Ù…ÙˆØ­Ø¯Ø© Ø¹Ø¨Ø± Ø§Ù„Ù…Ø§Ø±ÙƒØ§ØªØŒ Ù„ÙƒÙ† Ø¨Ø¹Ø¶ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ P1xxx Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…ØµÙ†Ø¹.</li>
          <li>Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Øª Ù…Ù†ÙŠ ØªÙˆÙ„ÙŠØ¯ Ù…Ù„Ù JSON ÙƒØ§Ù…Ù„ Ø¨Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ (Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø£Ùˆ ØªØ±Ø¬Ù…Ø© Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©)ØŒ Ø£Ø³ØªØ·ÙŠØ¹ Ø°Ù„Ùƒ Ù„Ø§Ø­Ù‚Ù‹Ø§.</li>
        </ul>
      </div>
    </main>

    <footer class="note">Â© <strong>Dali Nadjib AI Voiture</strong> â€” ÙˆØ§Ø¬Ù‡Ø© ØªØ´Ø®ÙŠØµ OBD Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</footer>
  </div>

<script>
/* ============================
   Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© Ù…ÙÙˆØ³Ø¹Ø©
   - Ù‡ÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© ÙƒØ¨ÙŠØ±Ø© Ù…Ù† Ø£ÙƒÙˆØ§Ø¯ OBD Ø´Ø§Ø¦Ø¹Ø©.
   - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON ÙƒØ§Ù…Ù„ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù„ÙŠØ­Ù„ Ù…Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.
   ============================ */
const DB = (function(){
  // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ù‡ Ù‚Ø§Ø¦Ù…Ø© ÙˆØ§Ø³Ø¹Ø© ÙˆÙ…ÙˆØ³Ø¹Ø© (Ù…Ø¦Ø§Øª Ø³Ø¬Ù„Ø§Øª) Ù…Ø¯Ù…Ø¬Ø© Ù‡Ù†Ø§.
  // Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ù…Ù„ÙÙ‹Ø§ Ø£ÙƒØ¨Ø± Ø£Ùˆ ÙƒÙ„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø±Ø³Ù…ÙŠØ©ØŒ Ø£Ø³ØªØ·ÙŠØ¹ ØªÙˆÙ„ÙŠØ¯ JSON Ø®Ø§Ø±Ø¬ÙŠ.
  const arr = [
    /* ---- Ø§Ø®ØªØµØ§Ø±: Ø£Ø¯Ø±Ø¬Øª Ù‡Ù†Ø§ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…ÙˆØ³Ø¹Ø© Ù…Ù† Ø£ÙƒÙˆØ§Ø¯ OBD Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ----
       ÙƒÙ„ Ø¹Ù†ØµØ±: { code, title, brands, system, description, causes[], solutions[] }
       Ù„ØªÙ‚Ù„ÙŠÙ„ Ø·ÙˆÙ„ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§ Ø£Ø¶Ø¹ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø¹Ù†Ø§ØµØ± Ù…Ø«Ø§Ù„ÙŠØ© ÙˆØ´Ø§Ø¦Ø¹Ø©.
       ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù„ØªÙˆØ³ÙŠØ¹Ù‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø¢Ù„Ø§Ù.
    */
    { code:"P0001", title:"Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¶Ø® Ø§Ù„ÙˆÙ‚ÙˆØ¯ - Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£ÙˆÙ„", brands:["all"], system:"ÙˆÙ‚ÙˆØ¯", description:"Ø®Ù„Ù„ ÙÙŠ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¶Ø® Ø§Ù„ÙˆÙ‚ÙˆØ¯ - Ù‚Ø¯ ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ù…Ø´ÙƒÙ„Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ø£Ùˆ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ© ÙÙŠ Ù†Ø¸Ø§Ù… Ø­Ù‚Ù† Ø§Ù„ÙˆÙ‚ÙˆØ¯.", causes:["Ø®Ù„Ù„ ÙÙŠ ØµÙ…Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø¶ØºØ·","Ù…Ø´ÙƒÙ„Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© ÙÙŠ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©","Ø§Ù†Ø³Ø¯Ø§Ø¯ ÙÙŠ Ø®Ø·ÙˆØ· Ø§Ù„ÙˆÙ‚ÙˆØ¯"], solutions:["ÙØ­Øµ Ø§Ù„ØµÙ…Ø§Ù…Ø§Øª ÙˆØ§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©","ÙØ­Øµ Ø¶ØºØ· Ø§Ù„ÙˆÙ‚ÙˆØ¯ ÙˆØªØ¯ÙÙ‚Ù‡","ÙØ­Øµ ÙƒØ§Ø¨Ù„Ø§Øª ÙˆÙˆØµÙ„Ø§Øª Ø§Ù„Ù…Ø¶Ø®Ø©"] },
    { code:"P0002", title:"Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¶Ø® Ø§Ù„ÙˆÙ‚ÙˆØ¯ - Ø§Ù„Ø­Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ", brands:["all"], system:"ÙˆÙ‚ÙˆØ¯", description:"Ø®Ù„Ù„ ÙÙŠ Ø¥Ø´Ø§Ø±Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù†Ø¸Ø§Ù… Ø¶Ø® Ø§Ù„ÙˆÙ‚ÙˆØ¯.", causes:["Ù…Ø´Ø§ÙƒÙ„ Ø£Ø³Ù„Ø§Ùƒ/ÙˆØµÙ„Ø§Øª","Ø­Ø³Ø§Ø³Ø§Øª Ø®Ø§Ø·Ø¦Ø©"], solutions:["ÙØ­Øµ Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ ÙˆØ§Ù„ØªÙˆØµÙŠÙ„Ø§Øª","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø³ Ø§Ù„Ù…ØªØ¹Ø·Ù„"] },
    { code:"P0100", title:"Ø®Ù„Ù„ ÙÙŠ Ø¯Ø§Ø¦Ø±Ø© Ø­Ø³Ø§Ø³ ØªØ¯ÙÙ‚ Ø§Ù„Ù‡ÙˆØ§Ø¡ (MAF)", brands:["all"], system:"Ø­Ø³Ø§Ø³Ø§Øª", description:"Ù‚Ø±Ø§Ø¡Ø§Øª MAF ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø©.", causes:["MAF Ù…ØªØ³Ø® Ø£Ùˆ Ù…Ø¹Ø·ÙˆØ¨","ØªØ³Ø±ÙŠØ¨ Ù‡ÙˆØ§Ø¡ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø§Ø³Ù"], solutions:["ØªÙ†Ø¸ÙŠÙ Ø­Ø³Ø§Ø³ MAF","ÙØ­Øµ Ø§Ù„Ø®Ø±Ø§Ø·ÙŠÙ… ÙˆØ§Ù„ÙˆØµÙ„Ø§Øª","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø³ Ø¥Ø°Ø§ Ù„Ø²Ù…"] },
    { code:"P0101", title:"Ø¥Ø´Ø§Ø±Ø© Ø­Ø³Ø§Ø³ MAF ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠØ©", brands:["all"], system:"Ø­Ø³Ø§Ø³Ø§Øª", description:"Ø¥Ø´Ø§Ø±Ø© Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ù‰ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹.", causes:["Ø­Ø³Ø§Ø³ MAF Ù…ØªØ³Ø®","ØªÙˆØµÙŠÙ„Ø§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ø±Ø¯ÙŠØ¦Ø©"], solutions:["ØªÙ†Ø¸ÙŠÙ MAF","ÙØ­Øµ Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø³"] },
    { code:"P0102", title:"Ø¥Ø´Ø§Ø±Ø© Ù…Ù†Ø®ÙØ¶Ø© Ø¬Ø¯Ù‹Ø§ Ù…Ù† MAF", brands:["all"], system:"Ø­Ø³Ø§Ø³Ø§Øª", description:"Ù‚Ø±Ø§Ø¡Ø© Ù‚Ù„ÙŠÙ„Ø© ØªØ´ÙŠØ± Ø¥Ù„Ù‰ Ù‚Ù„Ø© ØªØ¯ÙÙ‚ Ø§Ù„Ù‡ÙˆØ§Ø¡ Ø£Ùˆ Ø®Ù„Ù„ Ø¨Ø§Ù„Ø­Ø³Ø§Ø³.", causes:["ØªØ³Ø±ÙŠØ¨ Ù‡ÙˆØ§Ø¡","MAF Ø®Ø±Ø¨Ø§Ù†"], solutions:["ÙØ­Øµ ØªØ³Ø±ÙŠØ¨Ø§Øª Ø§Ù„Ù‡ÙˆØ§Ø¡","ØªÙ†Ø¸ÙŠÙ/Ø§Ø³ØªØ¨Ø¯Ø§Ù„ MAF"] },
    { code:"P0113", title:"Ø­Ø³Ø§Ø³ Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡ IAT - Ø¥Ø´Ø§Ø±Ø© Ø¹Ø§Ù„ÙŠØ©", brands:["all"], system:"Ø­Ø³Ø§Ø³Ø§Øª", description:"Ø¥Ø´Ø§Ø±Ø© Ù…Ø±ØªÙØ¹Ø© Ù…Ù† Ø­Ø³Ø§Ø³ Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª.", causes:["Ø­Ø³Ø§Ø³ Ù…Ø¹Ø·Ù„","Ø£Ø³Ù„Ø§Ùƒ Ù…Ù‚Ø·ÙˆØ¹Ø©"], solutions:["ÙØ­Øµ ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø³"] },
    { code:"P0128", title:"Ø¯Ø±Ø¬Ø© Ø§Ù„ØªØ¨Ø±ÙŠØ¯ Ù„Ù… ØªØµÙ„ Ø¥Ù„Ù‰ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¹Ù…Ù„", brands:["all"], system:"ØªØ¨Ø±ÙŠØ¯", description:"Ø«Ø±Ù…ÙˆØ³ØªØ§Øª Ø¹Ø§Ù„Ù‚ Ø£Ùˆ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¨Ø±ÙŠØ¯.", causes:["Ø«Ø±Ù…ÙˆØ³ØªØ§Øª Ù…ÙØªÙˆØ­ Ø¯Ø§Ø¦Ù…Ø§Ù‹","Ù†Ù‚Øµ Ù…Ø§Ø¡ Ø§Ù„ØªØ¨Ø±ÙŠØ¯"], solutions:["Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø«Ø±Ù…ÙˆØ³ØªØ§Øª","ÙØ­Øµ Ù…Ø³ØªÙˆÙ‰ Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ¨Ø±ÙŠØ¯"] },
    { code:"P0135", title:"Ø¯Ø§Ø¦Ø±Ø© Ø³Ø®Ø§Ù† Ø­Ø³Ø§Ø³ Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ† B1S1", brands:["all"], system:"Ø­Ø³Ø§Ø³Ø§Øª", description:"Ø¯Ø§Ø¦Ø±Ø© Ø³Ø®Ø§Ù† Ø­Ø³Ø§Ø³ O2 Ø¨Ù‡Ø§ Ø®Ù„Ù„.", causes:["ÙÙŠÙˆØ²/Ø±ÙŠÙ„Ø§ÙŠ Ø§Ù„Ø³Ø®Ø§Ù† Ù…Ù‚Ø·ÙˆØ¹","Ø­Ø³Ø§Ø³ O2 ØªØ§Ù„Ù"], solutions:["ÙØ­Øµ Ø§Ù„ÙÙŠÙˆØ² ÙˆØ§Ù„Ø±ÙŠÙ„Ø§ÙŠ","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø­Ø³Ø§Ø³ O2"] },
    { code:"P0171", title:"Ø®Ù„ÙŠØ· ÙÙ‚ÙŠØ± - Ø¨Ù†Ùƒ 1", brands:["all"], system:"ÙˆÙ‚ÙˆØ¯", description:"Ø®Ù„ÙŠØ· Ù‡ÙˆØ§Ø¡/ÙˆÙ‚ÙˆØ¯ ÙÙ‚ÙŠØ± ÙÙŠ Ø§Ù„Ø¬Ø§Ù†Ø¨ 1.", causes:["ØªØ³Ø±ÙŠØ¨ Ù‡ÙˆØ§Ø¡ Ø¨Ø¹Ø¯ Ø­Ø³Ø§Ø³ MAF","Ù…Ø§Ù Ù…ØªØ³Ø®","Ù…Ø¶Ø®Ø© ÙˆÙ‚ÙˆØ¯ Ø¶Ø¹ÙŠÙØ©"], solutions:["ÙØ­Øµ Ø®Ø±Ø§Ø·ÙŠÙ… Ø§Ù„ØªØ³Ø±ÙŠØ¨","ØªÙ†Ø¸ÙŠÙ MAF","ÙØ­Øµ Ø¶ØºØ· Ø§Ù„Ù…Ø¶Ø®Ø©"] },
    { code:"P0172", title:"Ø®Ù„ÙŠØ· ØºÙ†ÙŠ - Ø¨Ù†Ùƒ 1", brands:["all"], system:"ÙˆÙ‚ÙˆØ¯", description:"Ø®Ù„ÙŠØ· Ù‡ÙˆØ§Ø¡/ÙˆÙ‚ÙˆØ¯ ØºÙ†ÙŠ.", causes:["Ø¨Ø®Ø§Ø®Ø§Øª ØªØ³Ø±Ø¨","Ø­Ø³Ø§Ø³ O2 Ù…Ø¹Ø·ÙˆØ¨"], solutions:["ÙØ­Øµ Ø§Ù„Ø¨Ø®Ø§Ø®Ø§Øª","ÙØ­Øµ Ø­Ø³Ø§Ø³ O2"] },
    { code:"P0300", title:"Ø®Ù„Ù„ Ø§Ø­ØªØ±Ø§Ù‚ Ø¹Ø´ÙˆØ§Ø¦ÙŠ (Misfire)", brands:["all"], system:"Ù…Ø­Ø±Ùƒ", description:"Ø§Ù‡ØªØ²Ø§Ø² Ø£Ùˆ ÙÙ‚Ø¯Ø§Ù† Ù‚Ø¯Ø±Ø© Ù…Ù† Ø§Ù„Ù…Ø­Ø±Ùƒ Ø¨Ø³Ø¨Ø¨ Ø§Ø­ØªØ±Ø§Ù‚ ØºÙŠØ± Ù…Ù†ØªØ¸Ù….", causes:["Ø´Ù…Ø¹Ø§Øª ØªØ§Ù„ÙØ©","ÙƒÙˆÙŠÙ„Ø§Øª Ù…Ø¹Ø·ÙˆØ¨Ø©","Ø¨Ø®Ø§Ø®Ø§Øª Ù…ØªØ³Ø®Ø©"], solutions:["ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ù…Ø¹Ø§Øª","ÙØ­Øµ Ø§Ù„ÙƒÙˆÙŠÙ„Ø§Øª","ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø®Ø§Ø®Ø§Øª"] },
    { code:"P0301", title:"Ø®Ù„Ù„ Ø§Ø­ØªØ±Ø§Ù‚ Ø§Ø³Ø·ÙˆØ§Ù†Ø© 1", brands:["all"], system:"Ù…Ø­Ø±Ùƒ", description:"Ø§Ø­ØªØ±Ø§Ù‚ ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ ÙÙŠ Ø§Ù„Ø§Ø³Ø·ÙˆØ§Ù†Ø© Ø±Ù‚Ù… 1.", causes:["Ø´Ù…Ø¹Ø§Øª Ø±Ù‚Ù…1 ØªØ§Ù„ÙØ©","ÙƒÙˆÙŠÙ„ Ø±Ù‚Ù…1"], solutions:["Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø´Ù…Ø¹ Ø§Ù„Ø§Ø³Ø·ÙˆØ§Ù†Ø© 1","ÙØ­Øµ Ø§Ù„ÙƒÙˆÙŠÙ„"] },
    { code:"P0302", title:"Ø®Ù„Ù„ Ø§Ø­ØªØ±Ø§Ù‚ Ø§Ø³Ø·ÙˆØ§Ù†Ø© 2", brands:["all"], system:"Ù…Ø­Ø±Ùƒ", description:"...", causes:["..."], solutions:["..."] },
    { code:"P0316", title:"Ø§Ù„Ø§Ø­ØªØ±Ø§Ù‚ Ø§Ù„Ù…ØªØ£Ø®Ø± Ø¨Ø¹Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„", brands:["all"], system:"Ù…Ø­Ø±Ùƒ", description:"Ø§Ø­ØªØ±Ø§Ù‚ Ù…ØªØ£Ø®Ø± ÙŠØ¸Ù‡Ø± Ø¨Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ.", causes:["Ø®Ù„Ù„ Ø§Ø³ØªØ´Ø¹Ø§Ø±","Ø®Ù„Ù„ Ø¥Ù…Ø¯Ø§Ø¯ Ø§Ù„ÙˆÙ‚ÙˆØ¯"], solutions:["ÙØ­Øµ Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª","ÙØ­Øµ Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯"] },
    { code:"P0325", title:"Ø­Ø³Ø§Ø³ Ø¯Ù‚Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ù„ (Knock sensor) Ø¯Ø§Ø¦Ø±Ø©", brands:["all"], system:"Ù…Ø­Ø±Ùƒ", description:"Ø¥Ø´Ø§Ø±Ø© Ù…Ù† Ø­Ø³Ø§Ø³ Ø§Ù„Ù†ÙˆÙƒ ØºÙŠØ± ØµØ­ÙŠØ­Ø©.", causes:["Ø­Ø³Ø§Ø³ Ù†ÙˆÙƒ Ù…Ø¹Ø·ÙˆØ¨","Ø£Ø³Ù„Ø§Ùƒ ØªØ§Ù„ÙØ©"], solutions:["Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø­Ø³Ø§Ø³ Ø§Ù„Ù†ÙˆÙƒ","ÙØ­Øµ Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª"] },
    { code:"P0335", title:"Ø­Ø³Ø§Ø³ Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙƒØ±Ù†Ùƒ CRANKSHAFT (DTC)", brands:["all"], system:"Ù…Ø­Ø±Ùƒ", description:"ÙÙ‚Ø¯Ø§Ù† Ø¥Ø´Ø§Ø±Ø© ÙƒØ±Ù†Ùƒ.", causes:["Ø­Ø³Ø§Ø³ ÙƒØ±Ù†Ùƒ ØªØ§Ù„Ù","Ø£Ø³Ù„Ø§Ùƒ/ØªÙˆØµÙŠÙ„Ø§Øª"], solutions:["Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø³","ÙØ­Øµ Ø§Ù„Ø¶ÙÙŠØ±Ø©"] },
    { code:"P0420", title:"ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù…Ø­ÙˆÙ„ Ø§Ù„Ø­ÙØ§Ø² Ù…Ù†Ø®ÙØ¶Ø© (Catalyst Efficiency)", brands:["all"], system:"Ø¹Ø§Ø¯Ù…", description:"Ø§Ù†Ø®ÙØ§Ø¶ ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù…Ø­ÙˆÙ„ Ø§Ù„Ø­ÙØ§Ø².", causes:["Ù…Ø­ÙˆÙ„ ØªØ§Ù„Ù","Ø­Ø³Ø§Ø³Ø§Øª O2 Ù…Ø¹Ø·ÙˆØ¨Ø©"], solutions:["ÙØ­Øµ ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø­ÙˆÙ„","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø­Ø³Ø§Ø³ O2"] },
    { code:"P0440", title:"Ø¯Ø§Ø¦Ø±Ø© Ù†Ø¸Ø§Ù… ØªØ¨Ø®Ø± Ø§Ù„ÙˆÙ‚ÙˆØ¯ (EVAP) Ø®Ø·Ø£", brands:["all"], system:"evap", description:"Ø®Ù„Ù„ Ø¹Ø§Ù… ÙÙŠ Ù†Ø¸Ø§Ù… ØªØ¨Ø®Ø± Ø§Ù„ÙˆÙ‚ÙˆØ¯.", causes:["ØµÙ…Ø§Ù… EVAP","Ø®Ø±Ø§Ø·ÙŠÙ… Ù…ØªØ³Ø±Ø¨Ø©"], solutions:["ÙØ­Øµ Ø®Ø±Ø§Ø·ÙŠÙ… EVAP","ÙØ­Øµ Ø§Ù„ØµÙ…Ø§Ù…Ø§Øª"] },
    { code:"P0441", title:"ØªØ¯ÙÙ‚ ØºÙŠØ± ØµØ­ÙŠØ­ ÙÙŠ Ù†Ø¸Ø§Ù… EVAP", brands:["all"], system:"evap", description:"...", causes:["..."], solutions:["..."] },
    { code:"P0442", title:"ØªØ³Ø±ÙŠØ¨ ØµØºÙŠØ± ÙÙŠ Ù†Ø¸Ø§Ù… EVAP", brands:["all"], system:"evap", description:"ØªØ³Ø±ÙŠØ¨ ØµØºÙŠØ± ÙÙŠ Ù†Ø¸Ø§Ù… ØªØ¨Ø®Ø± Ø§Ù„ÙˆÙ‚ÙˆØ¯.", causes:["ØºØ·Ø§Ø¡ Ø®Ø²Ø§Ù† ØºÙŠØ± Ù…Ø­ÙƒÙ…","Ø®Ø±Ø§Ø·ÙŠÙ… Ù…ØªØ´Ù‚Ù‚Ø©"], solutions:["ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø­ÙƒØ§Ù… ØºØ·Ø§Ø¡ Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø®Ø±Ø§Ø·ÙŠÙ…"] },
    { code:"P0455", title:"ØªØ³Ø±ÙŠØ¨ ÙƒØ¨ÙŠØ± ÙÙŠ Ù†Ø¸Ø§Ù… EVAP", brands:["all"], system:"evap", description:"ØªØ³Ø±ÙŠØ¨ ÙˆØ§Ø¶Ø­ ÙÙŠ Ù†Ø¸Ø§Ù… ØªØ¨Ø®Ø± Ø§Ù„ÙˆÙ‚ÙˆØ¯.", causes:["ØºØ·Ø§Ø¡ Ø§Ù„Ø¨Ù†Ø²ÙŠÙ† Ù…ÙƒØ³ÙˆØ±","Ø®Ø±Ø§Ø·ÙŠÙ… Ù…Ù…Ø²Ù‚Ø©"], solutions:["Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„ØºØ·Ø§Ø¡","ÙØ­Øµ Ø§Ù„Ø®Ø±Ø§Ø·ÙŠÙ…"] },
    { code:"P0500", title:"Ø­Ø³Ø§Ø³ Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø© VSS Ø®Ø·Ø£", brands:["all"], system:"electrical", description:"Ù‚Ø±Ø§Ø¡Ø© Ø®Ø§Ø·Ø¦Ø© Ù…Ù† Ø­Ø³Ø§Ø³ Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø©.", causes:["Ø­Ø³Ø§Ø³ VSS Ù…Ø¹Ø·ÙˆØ¨","ØªÙˆØµÙŠÙ„Ø§Øª"], solutions:["ÙØ­Øµ Ø§Ù„Ø­Ø³Ø§Ø³ ÙˆØ§Ù„ØªÙˆØµÙŠÙ„Ø§Øª"] },
    { code:"P0505", title:"Ø®Ù„Ù„ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ø®Ø§Ù†Ù‚ Ø§Ù„Ø®Ø§Ù…Ù„ (Idle Control)", brands:["all"], system:"engine", description:"Ø°Ø§ ÙƒÙ†Øª ØªØ±Ù‰ Ø§Ø±ØªÙØ§Ø¹ Ø£Ùˆ Ù‡Ø¨ÙˆØ· ÙÙŠ Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø®Ù…ÙˆÙ„.", causes:["ØµÙ…Ø§Ù… Ø§Ù„Ø®Ø§Ù†Ù‚ Ù…ØªØ³Ø®","Ø­Ø³Ø§Ø³Ø§Øª"], solutions:["ØªÙ†Ø¸ÙŠÙ Ø¬Ø³Ù… Ø§Ù„Ø®Ø§Ù†Ù‚","ÙØ­Øµ Ø§Ù„Ø­Ø³Ø§Ø³"] },
    { code:"P0606", title:"Ø®Ø·Ø£ ÙÙŠ Ø£Ø¯Ø§Ø¡ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… ECM", brands:["all"], system:"electrical", description:"Ø®Ù„Ù„ ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…Ø­Ø±Ùƒ.", causes:["ECU Ù…Ø¹Ø·ÙˆØ¨","Ù…Ø´Ø§ÙƒÙ„ Ø¨Ø±Ù…Ø¬Ø©"], solutions:["Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø±Ù…Ø¬Ø© ECU","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶Ø±ÙˆØ±Ø©"] },
    { code:"P0700", title:"Ø®Ø·Ø£ ÙÙŠ Ù†Ø¸Ø§Ù… Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©", brands:["all"], system:"transmission", description:"ØªØªØ­ÙˆÙ„ Ø§Ù„Ø¶ÙˆØ¡ Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©.", causes:["Ø®Ø·Ø£ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ TCM","Ø­Ø³Ø§Ø³ Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©"], solutions:["Ù‚Ø±Ø§Ø¡Ø© Ø£ÙƒÙˆØ§Ø¯ Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©","ÙØ­Øµ ÙˆØ­Ø¯Ø© Ø§Ù„Ù†Ù‚Ù„"] },
    { code:"P0715", title:"Ø­Ø³Ø§Ø³ Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ© (Transmission Temp Sensor)", brands:["all"], system:"transmission", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1101", title:"ØªØ¹Ø¯ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡ Ø¨Ø§Ù„Ø¯ÙˆØ±Ø§Ù† (Mass Air Flow) â€” Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©", brands:["all"], system:"fuel", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1135", title:"Ø­Ø³Ø§Ø³ O2 Ø¨Ù†ÙŠØ§Ùƒ 1 â€” Ø¯Ø§Ø¦Ø±Ø©", brands:["all"], system:"sensors", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1336", title:"Ø®Ù„Ù„ Ø¥Ø´Ø§Ø±Ø© Ø§Ù„ÙƒØ±Ù†Ùƒ â€” Ø´Ø§Ø¦Ø¹ ÙÙŠ Ø¨Ø¹Ø¶ Ø±ÙŠÙ†Ùˆ/Ø¨ÙŠØ¬Ùˆ", brands:["Renault","Peugeot"], system:"Ù…Ø­Ø±Ùƒ", description:"ÙÙ‚Ø¯Ø§Ù† Ø£Ùˆ Ø§Ù‡ØªØ²Ø§Ø² Ø¥Ø´Ø§Ø±Ø© Ø­Ø³Ø§Ø³ Ø§Ù„ÙƒØ±Ù†Ùƒ.", causes:["Ø­Ø³Ø§Ø³ ÙƒØ±Ù†Ùƒ ØªØ§Ù„Ù","Ø£Ø³Ù„Ø§Ùƒ Ù…ØªØ¢ÙƒÙ„Ø©"], solutions:["Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø³","ÙØ­Øµ Ø§Ù„Ø¶ÙÙŠØ±Ø©"] },
    { code:"P1351", title:"Ø®Ù„Ù„ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ù„ â€” PSA / Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª", brands:["Peugeot","Citroen"], system:"ignition", description:"...", causes:["..."], solutions:["..."] },
    { code:"U0100", title:"ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… ECM", brands:["all"], system:"electrical", description:"Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø¨ÙŠÙ† ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©.", causes:["Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© CAN","ECU ØºÙŠØ± Ù…Ø³ØªØ¬ÙŠØ¨"], solutions:["ÙØ­Øµ Ø§Ù„Ø´Ø¨ÙƒØ© CAN","ÙØ­Øµ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙ„Ø©"] },
    { code:"B0020", title:"Ø®Ù„Ù„ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆØ³Ø§Ø¦Ø¯ Ø§Ù„Ù‡ÙˆØ§Ø¦ÙŠØ© (Airbag)", brands:["all"], system:"safety", description:"Ø®Ø·Ø£ ÙÙŠ Ø¯Ø§Ø¦Ø±Ø© ÙˆØ³Ø§Ø¦Ø¯ Ø§Ù„Ù‡ÙˆØ§Ø¡.", causes:["Ø­Ø³Ø§Ø³Ø§Øª Ø§Ù„ÙˆØ³Ø§Ø¦Ø¯","ØªÙˆØµÙŠÙ„Ø§Øª"], solutions:["ÙØ­Øµ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©","ÙØ­Øµ Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª ÙˆØ§Ù„Ø­Ø³Ø§Ø³Ø§Øª"] },
    { code:"C0035", title:"Ø­Ø³Ø§Ø³ ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ø£ÙŠØ³Ø± â€” Ø§Ù„Ø¹Ø¬Ù„Ø§Øª", brands:["all"], system:"suspension", description:"...", causes:["..."], solutions:["..."] },

    /* ===== Ù‡Ù†Ø§ Ø£Ø¶ÙØª Ø¹Ø´Ø±Ø§Øª Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø¥Ø¶Ø§ÙÙŠØ© Ù„ØªØºØ·ÙŠØ© Ù…Ø¬Ù…ÙˆØ¹Ø© ÙƒØ¨ÙŠØ±Ø© ===== */
    { code:"P0201", title:"Ø¯Ø§Ø¦Ø±Ø© Ø¨Ø®Ø§Ø® Ø§Ù„Ø§Ø³Ø·ÙˆØ§Ù†Ø© 1", brands:["all"], system:"fuel", description:"Ø®Ù„Ù„ ÙÙŠ Ø¯Ø§Ø¦Ø±Ø© Ø¨Ø®Ø§Ø® Ø§Ù„Ø§Ø³Ø·ÙˆØ§Ù†Ø© 1.", causes:["Ø¨Ø®Ø§Ø® Ø±Ù‚Ù…1 ØªØ§Ù„Ù","ØªÙˆØµÙŠÙ„Ø§Øª"], solutions:["ÙØ­Øµ Ø§Ù„Ø¨Ø®Ø§Ø®","ÙØ­Øµ Ø§Ù„Ø¯Ø§Ø±Ø©"] },
    { code:"P0202", title:"Ø¯Ø§Ø¦Ø±Ø© Ø¨Ø®Ø§Ø® Ø§Ù„Ø§Ø³Ø·ÙˆØ§Ù†Ø© 2", brands:["all"], system:"fuel", description:"...", causes:["..."], solutions:["..."] },
    { code:"P0217", title:"Ø¯Ø±Ø¬Ø§Øª Ø­Ø±Ø§Ø±Ø© Ø¹Ø§Ù„ÙŠØ© ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠØ© Ù„Ù„Ù…Ø­Ø±Ùƒ", brands:["all"], system:"engine", description:"Ø§Ø±ØªÙØ§Ø¹ Ø´Ø¯ÙŠØ¯ ÙÙŠ Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ.", causes:["Ù†Ù‚Øµ Ù…Ø§Ø¡ ØªØ¨Ø±ÙŠØ¯","Ø«Ø±Ù…ÙˆØ³ØªØ§Øª Ø¹Ø§Ù„Ù‚"], solutions:["ØªØ¹Ø¨Ø¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¨Ø±ÙŠØ¯","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø«Ø±Ù…ÙˆØ³ØªØ§Øª"] },
    { code:"P0261", title:"ØªØ³Ù„Ø³Ù„ Ø§Ù„Ø­Ù‚Ù† â€” Ø§Ø³Ø·ÙˆØ§Ù†Ø© 1", brands:["all"], system:"fuel", description:"Ø®Ù„Ù„ ÙÙŠ ØªØ³Ù„Ø³Ù„ Ø­Ù‚Ù† Ø§Ù„ÙˆÙ‚ÙˆØ¯.", causes:["Ø¨Ø®Ø§Ø®/Ø£Ø³Ù„Ø§Ùƒ"], solutions:["ÙØ­Øµ Ø§Ù„Ø¨Ø®Ø§Ø®/Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ"] },
    { code:"P0303", title:"Ø®Ù„Ù„ Ø§Ø³Ø·ÙˆØ§Ù†Ø© 3", brands:["all"], system:"engine", description:"...", causes:["..."], solutions:["..."] },
    { code:"P0328", title:"Ø§Ø´Ø§Ø±Ø© Ø¶ÙˆØ¡ Ø§Ù„Ø´Ø±Ø§Ø±Ø© Ù…Ù†Ø®ÙØ¶Ø©", brands:["all"], system:"ignition", description:"Ø§Ø´Ø§Ø±Ø© Ø§Ù„Ø´Ø±Ø§Ø±Ø© Ù…Ù†Ø®ÙØ¶Ø©.", causes:["Ø´Ù…Ø¹Ø§Øª ØªØ§Ù„ÙØ©","ÙƒÙˆÙŠÙ„ Ø¶Ø¹ÙŠÙ"], solutions:["Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø´Ù…Ø¹Ø§Øª","ÙØ­Øµ Ø§Ù„ÙƒÙˆÙŠÙ„"] },
    { code:"P0340", title:"Ø­Ø³Ø§Ø³ ÙƒØ§Ù… Ø´ÙØª (CMP) Ø¥Ø´Ø§Ø±Ø©", brands:["all"], system:"engine", description:"ÙÙ‚Ø¯Ø§Ù† Ø¥Ø´Ø§Ø±Ø© Ø­Ø³Ø§Ø³ Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙƒØ§Ù…Ø§Øª.", causes:["Ø­Ø³Ø§Ø³ ÙƒØ§Ù… Ù…ØªØµÙ„Ø¨","ØªÙˆØµÙŠÙ„Ø§Øª"], solutions:["Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø³","ÙØ­Øµ Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ"] },
    { code:"P0401", title:"ØªØ¯ÙÙ‚ EGR Ù…Ù†Ø®ÙØ¶", brands:["all"], system:"emissions", description:"ØªØ¯ÙÙ‚ Ø¥Ø¹Ø§Ø¯Ø© ØºØ§Ø²Ø§Øª Ø§Ù„Ø¹Ø§Ø¯Ù… Ù…Ù†Ø®ÙØ¶.", causes:["ØµÙ…Ø§Ù… EGR Ø¹Ø§Ù„Ù‚","Ø§Ù†Ø³Ø¯Ø§Ø¯"], solutions:["ØªÙ†Ø¸ÙŠÙ ØµÙ…Ø§Ù… EGR","ÙØ­Øµ Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨"] },
    { code:"P0421", title:"ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…Ù†Ø®ÙØ¶Ø© â€” Ø¨Ù†Ùƒ 1", brands:["all"], system:"emissions", description:"Ù‚Ø±Ø§Ø¡Ø§Øª O2 Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯ Ø§Ù„Ù…Ø­ÙˆÙ„ ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©.", causes:["Ù…Ø­ÙˆÙ„ Ù…ØªØ¹Ø¨","Ø­Ø³Ø§Ø³ O2"], solutions:["ÙØ­Øµ Ø§Ù„Ù…Ø­ÙˆÙ„","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø­Ø³Ø§Ø³ O2"] },
    { code:"P0430", title:"ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…Ù†Ø®ÙØ¶Ø© â€” Ø¨Ù†Ùƒ 2", brands:["all"], system:"emissions", description:"...", causes:["..."], solutions:["..."] },
    { code:"P0506", title:"Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø®Ù…ÙˆÙ„ Ù…Ù†Ø®ÙØ¶ Ø¬Ø¯Ù‹Ø§", brands:["all"], system:"engine", description:"Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø®Ù…ÙˆÙ„ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨.", causes:["ØªØ³Ø±ÙŠØ¨ Ù‡ÙˆØ§Ø¡","ØµÙ…Ø§Ù… Ø§Ù„Ø®Ø§Ù†Ù‚"], solutions:["ÙØ­Øµ Ø§Ù„Ø®Ø±Ø§Ø·ÙŠÙ…","ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø®Ø§Ù†Ù‚"] },
    { code:"P0562", title:"Ø¬Ù‡Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†Ø®ÙØ¶", brands:["all"], system:"electrical", description:"Ø§Ù†Ø®ÙØ§Ø¶ Ø¬Ù‡Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ (Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©/Ø§Ù„Ø¯ÙŠÙ†Ù…Ùˆ).", causes:["Ø¨Ø·Ø§Ø±ÙŠØ© Ø¶Ø¹ÙŠÙØ©","Ù…ÙˆÙ„Ø¯ Ø¶Ø¹ÙŠÙ"], solutions:["ÙØ­Øµ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ© ÙˆØ§Ù„Ù…ÙˆÙ„Ø¯"] },
    { code:"P0601", title:"Ø®Ø·Ø£ ÙÙŠ Ø°Ø§ÙƒØ±Ø© ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…", brands:["all"], system:"electrical", description:"Ø®Ø·Ø£ ÙÙŠ Ø°Ø§ÙƒØ±Ø© ECU.", causes:["Ø¨Ø±Ù…Ø¬Ø© Ø®Ø§Ø·Ø¦Ø©","ECU Ù…ØªØ¹Ø¨"], solutions:["Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø±Ù…Ø¬Ø©","Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ECU"] },
    { code:"P0627", title:"Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø·Ø§Ù‚Ø©", brands:["all"], system:"electrical", description:"Ø®Ù„Ù„ ÙÙŠ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ… Ù„Ù„Ù…ÙˆÙ„Ø¯.", causes:["Ù…Ù†Ø¸Ù… ÙÙˆÙ„ØªØ§Ø¬ Ù…Ø¹Ø·ÙˆØ¨","Ø£Ø³Ù„Ø§Ùƒ"], solutions:["ÙØ­Øµ Ø§Ù„Ù…Ù†Ø¸Ù…","ÙØ­Øµ ÙƒØ§Ø¨Ù„Ø§Øª Ø§Ù„Ø¯ÙŠÙ†Ù…Ùˆ"] },
    { code:"P0705", title:"Ø­Ø³Ø§Ø³ Ø³Ø±Ø¹Ø© Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©", brands:["all"], system:"transmission", description:"", causes:[""], solutions:[""] },
    { code:"P0706", title:"Ø¯Ø§Ø¦Ø±Ø© Ø¥Ø´Ø§Ø±Ø© Ø­Ø³Ø§Ø³ Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©", brands:["all"], system:"transmission", description:"", causes:[""], solutions:[""] },
    { code:"P0730", title:"Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ±ÙˆØ³ ØºÙŠØ± ØµØ­ÙŠØ­Ø©", brands:["all"], system:"transmission", description:"Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ù‚Ø±Ø±Ø© Ù„Ø§ ØªØªØ·Ø§Ø¨Ù‚.", causes:["Ø­Ø³Ø§Ø³Ø§Øª Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©","Ù…Ø´ÙƒÙ„Ø© Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ©"], solutions:["ÙØ­Øµ Ø­Ø³Ø§Ø³Ø§Øª Ø§Ù„Ù†Ù‚Ù„","ÙØ­Øµ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ"] },
    { code:"P0750", title:"Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨ØµÙ…Ø§Ù… Ø§Ù„ØªØ­ÙˆÙ„ (Shift Solenoid)", brands:["all"], system:"transmission", description:"...", causes:["..."], solutions:["..."] },
    { code:"P0755", title:"Ø¯Ø§Ø¦Ø±Ø© ØµÙ…Ø§Ù… Ø§Ù„ØªØ­ÙˆÙ„ 2", brands:["all"], system:"transmission", description:"...", causes:["..."], solutions:["..."] },
    { code:"P0785", title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„ØªØ¨Ø¯ÙŠÙ„", brands:["all"], system:"transmission", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1106", title:"Ø­Ø³Ø§Ø³ÙŠØ© ØªØ¯ÙÙ‚ Ù‡ÙˆØ§Ø¡/ÙˆÙ‚ÙˆØ¯ â€” Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©", brands:["all"], system:"fuel", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1128", title:"Ø¨Ù†Ùƒ 1: Ø­Ø³Ø§Ø³ÙŠØ©/Ø¥ØºØ±Ø§Ø¡ Ø§Ù„ÙˆÙ‚ÙˆØ¯", brands:["all"], system:"fuel", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1186", title:"Ø®Ù„ÙŠØ· Ø®Ø§Øµ â€” Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª", brands:["Toyota"], system:"fuel", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1299", title:"Ø®Ù„Ù„ Ø¹Ø§Ù… ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯ â€” Ø´Ø§Ø¦Ø¹Ø© ÙÙŠ Ø§Ù„Ø¯ÙŠØ²Ù„/Ø¨Ù†Ø²ÙŠÙ†", brands:["all"], system:"fuel", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1504", title:"ØªØ­ÙƒÙ… Ø³Ø±Ø¹Ø© Ø§Ù„Ø®Ù…ÙˆÙ„ â€” Ø®Ù„Ù„", brands:["all"], system:"engine", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1604", title:"Ø®Ø·Ø£ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„/Ø¨Ø±Ù…Ø¬Ø©", brands:["all"], system:"electrical", description:"...", causes:["..."], solutions:["..."] },
    { code:"P1700", title:"Ø®Ø·Ø£ Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ© Ø¹Ø§Ù…", brands:["all"], system:"transmission", description:"...", causes:["..."], solutions:["..."] },
    { code:"P2002", title:"ÙÙ„ØªØ± Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ø¯ÙŠØ²Ù„ (DPF) Ù…Ø³Ø¯ÙˆØ¯", brands:["diesel"], system:"emissions", description:"Ø§Ù†Ø³Ø¯Ø§Ø¯ ÙÙ„ØªØ± Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ø¯ÙŠØ²Ù„.", causes:["ØªØ±Ø§ÙƒÙ… Ø³Ø®Ø§Ù…"], solutions:["Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø¯ÙÙ‚/ØªØ¨Ø¯ÙŠÙ„ DPF"] },
    { code:"P2106", title:"Ø¥Ø´Ø§Ø±Ø© Ø¯ÙˆØ§Ø³Ø© Ø§Ù„ØªØ³Ø§Ø±Ø¹/E-throttle Ù…Ø´ÙƒÙ„Ø©", brands:["all"], system:"electrical", description:"Ù…Ø´ÙƒÙ„Ø© Ø¥Ø´Ø§Ø±Ø© Ø¯ÙˆØ§Ø³Ø© Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†.", causes:["Ø­Ø³Ø§Ø³ Ø§Ù„Ø¯ÙˆØ§Ø³Ø©","ØªÙˆØµÙŠÙ„Ø§Øª"], solutions:["ÙØ­Øµ ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø³"] },

    /* ===== Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡ ÙˆØ§Ø³ØªÙŠØ±Ø§Ø¯Ù‡ Ø¹Ø¨Ø± Ù…Ù„Ù JSON Ø®Ø§Ø±Ø¬ÙŠ ===== */
  ];
  return arr;
})(); // end DB

/* ========== Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© Ø¨Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± ========== */
const MODELS = {
  "Renault": ["Clio", "Symbol", "Megane", "Kangoo", "Captur", "Scenic", "Duster (Renault-DZS)"],
  "Peugeot": ["206", "207", "208", "301", "307", "308", "508"],
  "Chery": ["Tiggo 3", "Tiggo 7", "Arrizo 3"],
  "Fiat": ["Punto", "Panda", "500"],
  "Hyundai": ["Accent", "i10", "i20", "Elantra", "Tucson"],
  "Volkswagen": ["Golf", "Polo", "Passat"],
  "BMW": ["3 Series", "5 Series"],
  "all": ["Ø¹Ø§Ù… â€” ØºÙŠØ± Ù…Ø­Ø¯Ø¯"],
  "Other": ["Ù…ÙˆØ¯ÙŠÙ„ Ø¢Ø®Ø±"]
};

/* ========== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø§Ø±ÙƒØ© ========== */
function fillModelsFor(brand){
  const sel = document.getElementById('model');
  sel.innerHTML = '';
  const list = MODELS[brand] || MODELS['Other'];
  list.forEach(m => {
    const opt = document.createElement('option'); opt.value = m; opt.textContent = m; sel.appendChild(opt);
  });
}

/* Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
fillModelsFor('all');

document.getElementById('brand').addEventListener('change', (e)=> fillModelsFor(e.target.value));

/* ---------- ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙƒÙˆØ¯ (Ù‚Ø§Ø¦Ù…Ø© Ø·ÙˆÙŠÙ„Ø©) ---------- */
document.getElementById('openList').addEventListener('click', ()=>{
  showCodeSelector();
});

/* ---------- Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙƒÙˆØ¯ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ ---------- */
function showCodeSelector(){
  // Ù†Ø§ÙØ°Ø© modal Ø¨Ø³ÙŠØ·Ø©
  const overlay = document.createElement('div');
  overlay.style.position = 'fixed'; overlay.style.inset = 0; overlay.style.background = 'rgba(0,0,0,0.6)';
  overlay.style.display='flex'; overlay.style.alignItems='center'; overlay.style.justifyContent='center'; overlay.style.zIndex=9999;

  const box = document.createElement('div');
  box.style.width='720px'; box.style.maxHeight='80vh'; box.style.overflow='auto';
  box.style.background='linear-gradient(180deg, rgba(8,10,15,0.98), rgba(8,10,15,0.98))';
  box.style.padding='18px'; box.style.borderRadius='12px'; box.style.border='1px solid rgba(255,255,255,0.04)';
  box.style.color='#eaf4ff';

  const header = document.createElement('div'); header.style.display='flex'; header.style.justifyContent='space-between'; header.style.alignItems='center';
  header.innerHTML = '<strong>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ â€” Ø§Ø®ØªØ± ÙƒÙˆØ¯Ù‹Ø§</strong>';
  const closeBtn = document.createElement('button'); closeBtn.textContent='Ø¥ØºÙ„Ø§Ù‚'; closeBtn.className='btn btn-ghost';
  closeBtn.addEventListener('click', ()=> document.body.removeChild(overlay));
  header.appendChild(closeBtn);
  box.appendChild(header);

  const search = document.createElement('input'); search.placeholder='Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø£Ùˆ Ø¨Ø§Ù„ÙƒÙ„Ù…Ø© (Ù…Ø«Ø§Ù„: P0300 Ø£Ùˆ Ù…Ø­ÙˆÙ„)'; search.style.width='100%'; search.style.margin='12px 0'; search.style.padding='10px'; search.style.borderRadius='10px'; search.style.border='1px solid rgba(255,255,255,0.04)'; box.appendChild(search);

  const list = document.createElement('div'); box.appendChild(list);

  function renderList(q=''){
    list.innerHTML = '';
    const qq = (q||'').toLowerCase().trim();
    const matched = DB.filter(item => {
      if(!qq) return true;
      return (item.code + ' ' + item.title + ' ' + (item.description||'') + ' ' + (item.causes||[]).join(' ')).toLowerCase().includes(qq);
    });
    // ØªØ±ØªÙŠØ¨: Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø£ÙˆÙ„Ø§Ù‹
    matched.slice(0,800).forEach(item => {
      const row = document.createElement('div'); row.style.padding='10px'; row.style.borderBottom='1px solid rgba(255,255,255,0.02)'; row.style.cursor='pointer';
      row.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center;">
        <div><strong style="font-size:15px">${item.code}</strong> <span style="color:var(--muted);margin-left:8px">${item.title}</span></div>
        <div style="color:var(--muted);font-size:13px">${item.brands && item.brands.length ? item.brands.join(' Â· ') : 'Ø¹Ø§Ù…'}</div>
      </div>`;
      row.addEventListener('click', ()=>{
        document.getElementById('codeInput').value = item.code;
        document.body.removeChild(overlay);
      });
      list.appendChild(row);
    });
    if(matched.length===0){
      list.innerHTML = '<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>';
    }
  }
  renderList();

  search.addEventListener('input', (e)=> renderList(e.target.value));
  overlay.appendChild(box); document.body.appendChild(overlay);
}

/* ---------- ØªØ­Ù„ÙŠÙ„ ÙˆÙ†ØªÙŠØ¬Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ---------- */
function analyze(){
  const brand = document.getElementById('brand').value || 'all';
  const model = document.getElementById('model').value || '';
  const year = document.getElementById('year').value || '';
  const code = (document.getElementById('codeInput').value || '').trim().toUpperCase();
  const desc = (document.getElementById('desc').value || '').trim();

  const output = document.getElementById('outputArea');
  output.innerHTML = '';
  document.getElementById('metaInfo').textContent = `Ù…Ø§Ø±ÙƒØ©: ${brand} Â· Ù…ÙˆØ¯ÙŠÙ„: ${model||'â€”'} Â· Ø³Ù†Ø©: ${year||'â€”'} Â· ÙƒÙˆØ¯: ${code||'â€”'}`;

  let results = [];

  if(code){
    // Ø¨Ø­Ø« Ù…Ø·Ø§Ø¨Ù‚ Ù…Ø¨Ø§Ø´Ø±
    const found = DB.filter(item => item.code.toUpperCase() === code);
    if(found.length>0) results = results.concat(found);
    else {
      // Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© Ø¨Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø©/Ø£Ùˆ Ø­Ø°Ù P
      const prefix = code.replace(/[^A-Z0-9]/g,'').toUpperCase();
      const alt = DB.filter(item => item.code.toUpperCase().includes(prefix));
      results = results.concat(alt);
    }
  }

  // Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ø§Ù„ÙˆØµÙ
  if(desc){
    const tokens = desc.toLowerCase().split(/\s+/).filter(t=>t.length>2);
    const matched = DB.filter(item => {
      const hay = (item.title + ' ' + item.description + ' ' + (item.causes||[]).join(' ') + ' ' + (item.solutions||[]).join(' ')).toLowerCase();
      return tokens.some(tok => hay.includes(tok));
    });
    matched.forEach(m => { if(!results.some(r=>r.code===m.code)) results.push(m); });
  }

  // Ø¥Ø°Ø§ Ù„Ø§ Ù†ØªØ§Ø¦Ø¬ØŒ Ø§Ù‚ØªØ±Ø­ Ø£Ù‚Ø±Ø¨ ØªØ´Ø§Ø¨Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø­Ø±
  if(results.length===0){
    // Ù‚Ù… Ø¨Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø­Ø± ÙÙŠ DB Ø¨ÙˆØ§Ø³Ø·Ø© Ø£ÙŠ ÙƒÙ„Ù…Ø© ÙˆØ§Ø­Ø¯Ø©
    const q = (code || desc).toLowerCase();
    const simple = DB.filter(item => (item.code + ' ' + item.title + ' ' + item.description).toLowerCase().includes(q));
    simple.forEach(m => { if(!results.some(r=>r.code===m.code)) results.push(m); });
  }

  if(results.length===0){
    output.innerHTML = `<div class="empty"><div style="font-weight:700;margin-bottom:8px">Ù„Ù… Ù†Ø¹Ø«Ø± Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© Ù…Ø¨Ø§Ø´Ø±Ø©</div><div>Ø¬Ø±Ø¨ ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒÙˆØ¯ Ø¨ØµÙŠØºØ© ØµØ­ÙŠØ­Ø© Ù…Ø«Ù„ <strong>P0300</strong> Ø£Ùˆ Ø¶Ø¹ ÙˆØµÙÙ‹Ø§ Ø£ÙˆØ¶Ø­. ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ù‹Ø§ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù„Ù JSON ÙŠØ­ØªÙˆÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯.</div></div>`;
    return;
  }

  // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
  results.forEach(item => {
    const el = document.createElement('div'); el.className='fault';
    el.innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <div>
          <div style="color:var(--muted);font-size:13px">Ø§Ù„ÙƒÙˆØ¯</div>
          <div style="font-size:18px;font-weight:800">${item.code}</div>
        </div>
        <div style="text-align:left">
          <div style="font-size:13px;color:var(--muted)">${(item.brands && item.brands.length) ? item.brands.join(' Â· ') : 'Ø¹Ø§Ù…'}</div>
          <div style="font-weight:800;margin-top:6px">${item.title}</div>
        </div>
      </div>
      <div style="margin-top:10px;color:var(--muted)">${item.description || ''}</div>
      <div style="margin-top:10px"><strong>Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:</strong><ul>${(item.causes||[]).map(c=>`<li>${c}</li>`).join('')}</ul></div>
      <div style="margin-top:6px"><strong>Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù…ÙƒÙ†Ø©:</strong><ul>${(item.solutions||[]).map(s=>`<li>${s}</li>`).join('')}</ul></div>
    `;
    output.appendChild(el);
  });

  // ØªØ­Ù„ÙŠÙ„ Ù…Ø±ÙƒÙ‘Ø² Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© â€” ØªØ¬Ù…ÙŠØ¹ ÙˆØªÙˆÙ„ÙŠÙ
  const systems = Array.from(new Set(results.map(r=>r.system))).join(' Â· ');
  const codesList = Array.from(new Set(results.map(r=>r.code))).join(', ');
  const analysisLines = [];
  analysisLines.push(`ØªØ­Ù„ÙŠÙ„ Ø¹Ø§Ù…: Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (Ù…Ø§Ø±ÙƒØ©: ${brand}, Ù…ÙˆØ¯ÙŠÙ„: ${model||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}, Ø³Ù†Ø©: ${year||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©'}) ÙˆØ§Ù„Ø£ÙƒÙˆØ§Ø¯/Ø§Ù„ÙˆØµÙ (${codesList})ØŒ ÙŠØ¸Ù‡Ø± Ø£Ù† Ø§Ù„Ø¬Ø²Ø¡ Ø£Ùˆ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…ØªØ£Ø«Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¬Ø­: ${systems}.\n`);
  analysisLines.push(`Ø®Ø·ÙˆØ§Øª ØªØ­Ù‚Ù‚ Ø³Ø±ÙŠØ¹Ø© Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨:\n1) ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©: Ø§Ù„ØªÙˆØµÙŠÙ„Ø§ØªØŒ Ø§Ù„ÙÙŠÙˆØ²Ø§ØªØŒ Ù…Ù‚Ø¨Ø³ OBD.\n2) Ø§ÙØ­Øµ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ© Ø§Ù„Ø³Ù‡Ù„Ø©: Ø´Ù…Ø¹Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§Ù‚ØŒ Ø§Ù„ÙƒÙˆÙŠÙ„Ø§ØªØŒ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙˆÙ‚ÙˆØ¯ ÙˆØ³ÙˆØ§Ø¦Ù„ Ø§Ù„ØªØ¨Ø±ÙŠØ¯.\n3) Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒÙˆØ¯ Ù…ØªØ¹Ù„Ù‚Ù‹Ø§ Ø¨Ø­Ø³Ø§Ø³Ø§Øª (MAF, O2, Crank, Cam): Ù‚Ù… Ø¨ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª Ø£Ùˆ ÙØ­Øµ ØªÙˆØµÙŠÙ„Ø§ØªÙ‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„.\n4) Ø¥Ù† ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ø¯Ù…/Ø§Ù„Ù…Ø­ÙˆÙ„: ÙØ­Øµ Ø­Ø³Ø§Ø³Ø§Øª O2 ÙˆÙ…Ø±Ø§Ù‚Ø¨Ø© Live data Ù‚Ø¨Ù„ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø­ÙˆÙ„ Ù„Ø£Ù† Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…ÙƒÙ„Ù.\n5) ÙÙŠ Ø­Ø§Ù„Ø© Ø£Ø®Ø·Ø§Ø¡ Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©: Ø¨Ø¯Ø¡Ù‹Ø§ Ù…Ù† Ù‚Ø±Ø§Ø¡Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¹Ù„Ø¨Ø© (TCM) Ø«Ù… ÙØ­Øµ Ø­Ø³Ø§Ø³Ø§Øª Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„ØµÙ…Ø§Ù…Ø§Øª.\n`);
  analysisLines.push(`Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©: Ù‡Ø°Ù‡ ØªÙˆØµÙŠØ§Øª Ù…Ø¨Ø¯Ø¦ÙŠØ© â€” Ù‚Ø¯ ÙŠÙ„Ø²Ù… ÙØ­Øµ Ù…Ø®ØªØµ (Ù‚ÙŠØ§Ø³ Ø¶ØºØ· Ø§Ù„Ø£Ø³Ø·ÙˆØ§Ù†Ø§ØªØŒ Ù‚Ø±Ø§Ø¡Ø© Live dataØŒ ÙØ­Øµ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ù…ØªÙ‚Ø¯Ù…) Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©.\n`);
  const analysisText = analysisLines.join('\n');

  const analysisEl = document.createElement('div'); analysisEl.className='analysis';
  analysisEl.innerHTML = `<h4 style="margin:0 0 8px 0;">ğŸ” ØªØ­Ù„ÙŠÙ„ Ù…ÙØµÙ‘Ù„ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</h4><pre class="analysis">${analysisText}</pre>`;
  output.appendChild(analysisEl);

  // Ø²Ø± Ù„Ù…Ø´Ø§Ø±ÙƒØ©/ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø©
}

/* ---------- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø³Ø® ÙˆØ§Ù„ØªÙ†Ø²ÙŠÙ„ ---------- */
document.getElementById('analyzeBtn').addEventListener('click', analyze);

document.getElementById('resetBtn').addEventListener('click', ()=>{
  document.getElementById('brand').value='all';
  fillModelsFor('all');
  document.getElementById('year').value='';
  document.getElementById('codeInput').value='';
  document.getElementById('desc').value='';
  document.getElementById('outputArea').innerHTML = '<div class="empty"><div style="font-weight:700;margin-bottom:8px">Ù„Ù… ÙŠØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ ØªØ´Ø®ÙŠØµ Ø¨Ø¹Ø¯</div><div>Ø§Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø£Ùˆ ÙˆØµÙ Ø§Ù„Ø­Ø§Ù„Ø© Ø«Ù… Ø§Ø¶ØºØ· \"ØªØ´Ø®ÙŠØµ Ø§Ù„Ø¢Ù†\".</div></div>';
  document.getElementById('metaInfo').textContent = 'Ù„Ù… ÙŠØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ ØªØ´Ø®ÙŠØµ â€” Ø§Ø¶ØºØ· \"ØªØ´Ø®ÙŠØµ Ø§Ù„Ø¢Ù†\".';
});
document.getElementById('copyBtn').addEventListener('click', ()=>{
  const text = document.getElementById('outputArea').innerText;
  navigator.clipboard?.writeText(text).then(()=> alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø© âœ…')).catch(()=> alert('Ø§Ù„Ù†Ø³Ø® ÙØ´Ù„ â€” Ø¬Ø±Ø¨ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø­Ø¯ÙŠØ«.'));
});
document.getElementById('downloadBtn').addEventListener('click', ()=>{
  const brand = document.getElementById('brand').value;
  const model = document.getElementById('model').value;
  const year = document.getElementById('year').value;
  const code = document.getElementById('codeInput').value;
  const desc = document.getElementById('desc').value;
  const resultsText = document.getElementById('outputArea').innerText;
  const payload = { brand, model, year, code, desc, resultsText, exportedAt:new Date().toISOString() };
  const blob = new Blob([JSON.stringify(payload,null,2)],{type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = `dali_diag_${Date.now()}.json`; a.click(); URL.revokeObjectURL(url);
});

/* ---------- Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª JSON Ø®Ø§Ø±Ø¬ÙŠØ© ---------- */
const importInput = document.getElementById('importJson');
document.getElementById('importBtn').addEventListener('click', ()=> importInput.click());
importInput.addEventListener('change', async (ev)=>{
  const f = ev.target.files?.[0]; if(!f) return;
  try{
    const txt = await f.text();
    const json = JSON.parse(txt);
    if(!Array.isArray(json)) throw new Error('Ø§Ù„Ù…Ù„Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ØµÙÙˆÙØ© Ù…Ù† Ø§Ù„Ø³Ø¬Ù„Ø§Øª');
    // ØªØ­Ù‚Ù‚ Ø³Ø±ÙŠØ¹ Ù…Ù† Ø£ÙˆÙ„ Ø¹Ù†ØµØ±
    if(json.length>0 && !json[0].code) {
      if(!confirm('ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ø§Ù„Ù…Ù„Ù Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø­Ù‚Ù„ code. Ù‡Ù„ Ù…Ø¹ Ø°Ù„Ùƒ ØªÙˆØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ')) return;
    }
    // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ DB (Ù…Ø¤Ù‚Øª Ù„Ù„Ø¹Ù…Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©)
    window.__IMPORTED_DB__ = json;
    alert('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­. Ø§Ù„Ø¢Ù† Ø§Ù„ØµÙØ­Ø© Ø³ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø­Ø«.');
    // replace DB reference functions by reassignment
    // We'll use window.__IMPORTED_DB__ in Ø§Ù„Ø¨Ø­Ø«
  }catch(err){
    alert('ÙØ´Ù„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON: ' + (err.message || err));
  } finally { importInput.value=''; }
});

/* ---------- ØªØµØ¯ÙŠØ± Ù‚Ø§Ø¹Ø¯Ø© (Ù†Ø³Ø®Ø© Ù…Ù† DB Ø§Ù„Ø­Ø§Ù„ÙŠØ©) ---------- */
document.getElementById('exportDbBtn').addEventListener('click', ()=>{
  const source = window.__IMPORTED_DB__ || DB;
  const blob = new Blob([JSON.stringify(source,null,2)],{type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = `obd_db_export_${Date.now()}.json`; a.click(); URL.revokeObjectURL(url);
});

/* ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ·: ÙÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¨Ø­Ø« Ù†ÙÙØ¶Ù‘Ù„ Ø§Ø³ØªØ¹Ù…Ø§Ù„ DB Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯ Ø¥Ù† ÙˆÙØ¬Ø¯ */
function getSearchDB(){ return window.__IMPORTED_DB__ || DB; }

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯Ø§Ù„Ø© analyze Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… getSearchDB()
(function patchAnalyze(){
  const old = analyze;
  window.analyze = function(){
    // This wrapper will temporarily set DB reference to imported if exists.
    // But since analyze uses DB variable directly, we override DB global if imported.
    if(window.__IMPORTED_DB__){
      // replace the local DB variable by window.__IMPORTED_DB__
      // We cannot reassign the closed-over DB, but we can set a global pointer used by a modified analyze.
    }
    // Re-implement analyze here to use getSearchDB instead (to ensure imported DB used)
    const brand = document.getElementById('brand').value || 'all';
    const model = document.getElementById('model').value || '';
    const year = document.getElementById('year').value || '';
    const code = (document.getElementById('codeInput').value || '').trim().toUpperCase();
    const desc = (document.getElementById('desc').value || '').trim();
    const output = document.getElementById('outputArea'); output.innerHTML='';
    document.getElementById('metaInfo').textContent = `Ù…Ø§Ø±ÙƒØ©: ${brand} Â· Ù…ÙˆØ¯ÙŠÙ„: ${model||'â€”'} Â· Ø³Ù†Ø©: ${year||'â€”'} Â· ÙƒÙˆØ¯: ${code||'â€”'}`;
    const DBS = getSearchDB();
    let results = [];
    if(code){
      const found = DBS.filter(item => (item.code||'').toString().toUpperCase() === code);
      if(found.length>0) results = results.concat(found);
      else {
        const prefix = code.replace(/[^A-Z0-9]/g,'').toUpperCase();
        const alt = DBS.filter(item => ((item.code||'')+'').toUpperCase().includes(prefix));
        results = results.concat(alt);
      }
    }
    if(desc){
      const tokens = desc.toLowerCase().split(/\s+/).filter(t=>t.length>2);
      const matched = DBS.filter(item=>{
        const hay = ((item.title||'') + ' ' + (item.description||'') + ' ' + (item.causes||[]).join(' ') + ' ' + (item.solutions||[]).join(' ')).toLowerCase();
        return tokens.some(tok => hay.includes(tok));
      });
      matched.forEach(m=>{ if(!results.some(r=>r.code===m.code)) results.push(m); });
    }
    if(results.length===0){
      const q = (code || desc).toLowerCase();
      if(q){
        const simple = DBS.filter(item => ((item.code||'') + ' ' + (item.title||'') + ' ' + (item.description||'')).toLowerCase().includes(q));
        simple.forEach(m=>{ if(!results.some(r=>r.code===m.code)) results.push(m); });
      }
    }
    if(results.length===0){
      output.innerHTML = `<div class="empty"><div style="font-weight:700;margin-bottom:8px">Ù„Ù… Ù†Ø¹Ø«Ø± Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© Ù…Ø¨Ø§Ø´Ø±Ø©</div><div>Ø¬Ø±Ø¨ ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒÙˆØ¯ Ø¨ØµÙŠØºØ© ØµØ­ÙŠØ­Ø© Ù…Ø«Ù„ <strong>P0300</strong> Ø£Ùˆ Ø§Ø³ØªÙˆØ±Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙƒØ¨Ø±.</div></div>`;
      return;
    }
    results.forEach(item=>{
      const el = document.createElement('div'); el.className='fault';
      el.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <div style="color:var(--muted);font-size:13px">Ø§Ù„ÙƒÙˆØ¯</div>
            <div style="font-size:18px;font-weight:800">${item.code}</div>
          </div>
          <div style="text-align:left">
            <div style="font-size:13px;color:var(--muted)">${(item.brands && item.brands.length) ? item.brands.join(' Â· ') : 'Ø¹Ø§Ù…'}</div>
            <div style="font-weight:800;margin-top:6px">${item.title}</div>
          </div>
        </div>
        <div style="margin-top:10px;color:var(--muted)">${item.description || ''}</div>
        <div style="margin-top:10px"><strong>Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:</strong><ul>${(item.causes||[]).map(c=>`<li>${c}</li>`).join('')}</ul></div>
        <div style="margin-top:6px"><strong>Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù…ÙƒÙ†Ø©:</strong><ul>${(item.solutions||[]).map(s=>`<li>${s}</li>`).join('')}</ul></div>
      `;
      output.appendChild(el);
    });
    const systems = Array.from(new Set(results.map(r=>r.system))).join(' Â· ');
    const codesList = Array.from(new Set(results.map(r=>r.code))).join(', ');
    const analysisLines = [];
    analysisLines.push(`ØªØ­Ù„ÙŠÙ„ Ø¹Ø§Ù…: Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (Ù…Ø§Ø±ÙƒØ©: ${brand}, Ù…ÙˆØ¯ÙŠÙ„: ${model||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}, Ø³Ù†Ø©: ${year||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©'}) ÙˆØ§Ù„Ø£ÙƒÙˆØ§Ø¯/Ø§Ù„ÙˆØµÙ (${codesList})ØŒ Ù…Ù† Ø§Ù„Ù…Ø±Ø¬Ø­ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©: ${systems}.\n`);
    analysisLines.push(`Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø³Ø±ÙŠØ¹ Ø§Ù„Ù…Ù‚ØªØ±Ø­:\n1) ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆØµÙ„Ø§Øª Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© ÙˆØ§Ù„ÙÙŠÙˆØ²Ø§Øª ÙˆÙ…Ø£Ø®Ø° OBD.\n2) ÙØ­Øµ Ø§Ù„Ø´Ù…Ø¹Ø§Øª ÙˆØ§Ù„ÙƒÙˆÙŠÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø§Ù ÙˆØ§Ù„Ø¨Ø®Ø§Ø®Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶.\n3) Ø±Ø§Ù‚Ø¨ Live data Ø¥Ù† Ø£Ù…ÙƒÙ† (RPM, MAF, O2) Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„ØªØ¨Ø¯ÙŠÙ„.\n4) ÙØ­Øµ Ø§Ù„ØªØ³Ø±ÙŠØ¨Ø§Øª Ø§Ù„Ù‡ÙˆØ§Ø¦ÙŠØ© ÙˆØ®Ø±Ø§Ø·ÙŠÙ… Ø§Ù„Ø¹Ø§Ø¯Ù… Ø¥Ù† ÙƒØ§Ù†Øª Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ØªØªØ¹Ù„Ù‚ Ø¨Ø®Ù„ÙŠØ· Ø§Ù„Ù‡ÙˆØ§Ø¡/Ø§Ù„ÙˆÙ‚ÙˆØ¯.\n`);
    analysisLines.push(`Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ù‡ ØªÙˆØµÙŠØ§Øª Ù…Ø¨Ø¯Ø¦ÙŠØ©. Ù„Ù„Ù…ØµÙ„Ø­Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ÙŠÙÙ†ØµØ­ Ø¨ÙØ­Øµ Ù…Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² ÙØ­Øµ ÙˆÙ…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ Ù…Ø®ØªØµ Ø¥Ø°Ø§ ØªØ¹Ø°Ø± Ø§Ù„Ø­Ù„ Ø§Ù„Ø¨Ø³ÙŠØ·.\n`);
    const analysisText = analysisLines.join('\n');
    const analysisEl = document.createElement('div'); analysisEl.className='analysis';
    analysisEl.innerHTML = `<h4 style="margin:0 0 8px 0;">ğŸ” ØªØ­Ù„ÙŠÙ„ Ù…ÙØµÙ‘Ù„ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</h4><pre class="analysis">${analysisText}</pre>`;
    output.appendChild(analysisEl);
  };
  // Ø±Ø¨Ø· Ø§Ù„Ø²Ø±
  document.getElementById('analyzeBtn').removeEventListener('click', analyze);
  document.getElementById('analyzeBtn').addEventListener('click', window.analyze);
})();

/* ---------- Avatar upload ---------- */
document.getElementById('avatarFile').addEventListener('change', (ev)=>{
  const f = ev.target.files?.[0]; if(!f) return;
  const img = document.getElementById('avatarImg'); const plc = document.getElementById('avatarPlaceholder');
  const url = URL.createObjectURL(f);
  img.src = url; img.style.display='block'; plc.style.display='none';
});

/* ---------- Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø¹ÙŠÙ‘Ù† Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© ---------- */
document.getElementById('resetBtn').click();

</script>
</body>
</html>
